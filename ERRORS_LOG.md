# 에러 및 교훈 기록 (Animal Text Battle)

> **Note**: 이 에러들은 글로벌 에러 로그에도 기록되어 있습니다.
> 글로벌 로그: `~/.claude/ERRORS_LOG.md`
> 스킬 사용: `/sc:errors search <keyword>`

이 파일은 프로젝트에서 발생한 에러와 해결 방법, 그리고 다시는 반복하지 말아야 할 실수들을 기록합니다.

---

## 2026-01-29: Gemini API 모델 선택 문제

### 문제
- `gemini-2.0-flash`, `gemini-2.0-flash-lite`, `gemini-2.0-pro` 모델 사용 시 403 에러 또는 API 차단 메시지 발생
- 사용자가 과금 설정을 했음에도 불구하고 작동 안 함

### 원인
- Gemini 2.0 모델들은 무료 티어에서 매우 제한적인 할당량(quota)을 가짐
- 403 에러가 API 키 차단이 아닌 모델 접근 권한 문제일 수 있음

### 해결
- **`gemini-2.0-flash`** 모델 사용 (API 키가 2.0+ 모델만 지원)
- 복잡한 폴백 로직 대신 단순하게 하나의 안정적인 모델 사용
- **중요**: API 키 생성 시점에 따라 지원하는 모델 버전이 다름!

### 교훈
1. **작동하는 코드를 함부로 바꾸지 말 것** - "개선"하려다가 오히려 망가뜨림
2. **API 키와 모델 버전 확인 필수** - 키 생성 시점에 따라 지원 모델이 다름
3. **에러 메시지를 너무 일반화하지 말 것** - 403이 항상 "API 키 차단"을 의미하지 않음
4. **예민한 부분은 테스트하면서 코딩** - AI API 변경 후 즉시 테스트

---

## 2026-01-28: Vercel 환경 변수 줄바꿈 문제

### 문제
- Firebase 환경 변수에 `\n` 문자가 붙어서 인증 실패
- 예: `animal-text-battle.firebaseapp.com\nn\n`

### 원인
- `echo` 명령어로 환경 변수 추가 시 자동으로 줄바꿈 추가됨

### 해결
- `echo -n` 사용하거나 `printf` 사용
- Vercel 대시보드에서 직접 입력

### 교훈
1. **환경 변수 추가 후 항상 확인할 것**
2. **`echo` 대신 `echo -n` 또는 `printf` 사용**

---

## 2026-01-28: Google 로그인 계정 선택 안 됨

### 문제
- Google 로그인 시 계정 선택 화면 없이 바로 로그인됨

### 해결
```typescript
provider.setCustomParameters({
  prompt: 'select_account'
});
```

### 교훈
1. **Google OAuth 설정 시 `prompt: 'select_account'` 필수**

---

## 일반적인 교훈

### 하지 말아야 할 것
1. 작동하는 코드를 "개선"한다고 건드리기
2. 여러 가지를 한 번에 바꾸기
3. 에러 메시지를 추측으로 해석하기
4. 테스트 없이 배포하기

### 해야 할 것
1. 변경 전 현재 상태 백업/기록
2. 한 번에 하나씩만 변경
3. 변경 후 즉시 테스트
4. 에러 발생 시 실제 에러 메시지 확인
5. 이 파일에 에러와 해결책 기록
